services:
    crewcall.jobs:
        class: CrewCallBundle\Service\Jobs
        public: true
        arguments: ["@doctrine.orm.entity_manager"]

    crewcall.joblogs:
        class: CrewCallBundle\Service\JobLogs
        public: true
        arguments: ["@doctrine.orm.entity_manager"]

    crewcall.retriever:
        class: CrewCallBundle\Service\CrewCallRetriever
        arguments: ["@doctrine.orm.entity_manager"]

    crewcall.calendar:
        class: CrewCallBundle\Service\Calendar
        public: true
        arguments: ["@router"]

    crewcall.formcreator:
        class: CrewCallBundle\Service\FormCreator
        arguments: ["@service_container"]

    crewcall.statehandler:
        class: CrewCallBundle\Service\StateHandler
        arguments: ["@doctrine.orm.entity_manager", "@sakonnin.messages"]

    crewcall_retriever:
        alias: crewcall.retriever

    crewcall.statechangelistener:
        class: CrewCallBundle\EventListener\StateChangeListener
        arguments: ["@crewcall.statehandler"]
        tags:
            - { name: doctrine.event_listener, event: preUpdate  }
            - { name: doctrine.event_listener, event: postFlush  }
